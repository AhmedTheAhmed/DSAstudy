<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSA Master Quiz - 100 Questions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .correct-anim { animation: pulseGreen 0.5s; }
        .wrong-anim { animation: shakeRed 0.4s; }
        @keyframes pulseGreen { 0% { transform: scale(1); } 50% { transform: scale(1.02); box-shadow: 0 0 15px rgba(34, 197, 94, 0.5); } 100% { transform: scale(1); } }
        @keyframes shakeRed { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #a8a8a8; }

        .option-btn { transition: all 0.2s ease; }
        .option-btn:active { transform: scale(0.98); }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 shadow-sm sticky top-0 z-10">
        <div class="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold">
                    <i class="fas fa-code"></i>
                </div>
                <h1 class="font-bold text-xl tracking-tight text-slate-900">DSA Master <span class="text-xs font-normal text-slate-500 ml-2">100 Question Challenge</span></h1>
            </div>
            <div class="flex items-center gap-4 text-sm font-medium text-slate-600">
                <div id="score-display" class="hidden bg-slate-100 px-3 py-1 rounded-full">
                    Score: <span id="current-score" class="text-blue-600 font-bold">0</span>
                </div>
                <button id="restart-btn" class="hover:text-blue-600 transition-colors" title="Restart">
                    <i class="fas fa-redo text-lg"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow flex flex-col items-center justify-center p-4 w-full max-w-4xl mx-auto">
        
        <!-- Start Screen -->
        <div id="start-screen" class="w-full max-w-2xl bg-white rounded-2xl shadow-xl border border-slate-100 p-8 text-center fade-in">
            <div class="mb-8">
                <div class="w-20 h-20 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto text-4xl mb-4">
                    <i class="fas fa-layer-group"></i>
                </div>
                <h2 class="text-3xl font-bold mb-3 text-slate-800">Comprehensive DSA Exam Prep</h2>
                <p class="text-slate-500 mb-6">100 Questions structured by difficulty.<br>No AI required. Practical & Theoretical C++.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left max-w-lg mx-auto mb-8">
                    <div class="p-3 bg-green-50 border border-green-100 rounded-lg">
                        <span class="font-bold text-green-700 block">Basic (1-25)</span>
                        <span class="text-xs text-green-600">Big O, Arrays, Pointers, Structs</span>
                    </div>
                    <div class="p-3 bg-blue-50 border border-blue-100 rounded-lg">
                        <span class="font-bold text-blue-700 block">Intermediate (26-50)</span>
                        <span class="text-xs text-blue-600">Linked Lists, Stacks, Queues</span>
                    </div>
                    <div class="p-3 bg-purple-50 border border-purple-100 rounded-lg">
                        <span class="font-bold text-purple-700 block">Advanced (51-75)</span>
                        <span class="text-xs text-purple-600">Trees, Heaps, Maps, Sets</span>
                    </div>
                    <div class="p-3 bg-orange-50 border border-orange-100 rounded-lg">
                        <span class="font-bold text-orange-700 block">Expert (76-100)</span>
                        <span class="text-xs text-orange-600">Memory Mgmt, Edge Cases, Complex Analysis</span>
                    </div>
                </div>
            </div>

            <button onclick="startQuiz()" class="w-full md:w-auto px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-lg transition-all transform hover:scale-105 shadow-lg shadow-blue-200">
                Start Challenge
            </button>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" class="hidden w-full max-w-3xl fade-in">
            <!-- Level Indicator -->
            <div class="flex justify-between items-end mb-2 px-1">
                <span id="difficulty-label" class="text-sm font-bold text-green-600 bg-green-100 px-2 py-0.5 rounded">Basic Level</span>
                <span class="text-xs font-bold tracking-wider text-slate-400 uppercase">Question <span id="q-current">1</span>/100</span>
            </div>

            <!-- Progress Bar -->
            <div class="w-full bg-slate-200 h-2.5 rounded-full mb-6 overflow-hidden">
                <div id="progress-bar" class="bg-blue-600 h-full transition-all duration-300 w-0"></div>
            </div>

            <!-- Question Card -->
            <div class="bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden">
                <div class="p-6 md:p-8 border-b border-slate-100 bg-slate-50">
                    <h2 id="question-text" class="text-lg md:text-xl font-semibold text-slate-800 leading-relaxed">
                        <!-- Question goes here -->
                    </h2>
                </div>

                <div class="p-6 md:p-8 bg-white relative">
                    <div id="options-grid" class="grid grid-cols-1 gap-3">
                        <!-- Options go here -->
                    </div>
                </div>
                
                <!-- Feedback / Next Area -->
                <div id="feedback-area" class="hidden p-4 bg-slate-50 border-t border-slate-100 flex flex-col md:flex-row justify-between items-center gap-4">
                    <div class="flex items-center gap-3 flex-1">
                        <div id="feedback-icon" class="w-10 h-10 flex-shrink-0 rounded-full flex items-center justify-center text-white font-bold"></div>
                        <div>
                            <p id="feedback-title" class="font-bold text-sm"></p>
                            <p id="feedback-text" class="text-xs text-slate-600"></p>
                        </div>
                    </div>
                    <button id="next-btn" onclick="nextQuestion()" class="w-full md:w-auto px-8 py-2.5 bg-slate-900 hover:bg-slate-800 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden w-full max-w-lg bg-white rounded-2xl shadow-xl border border-slate-100 p-8 text-center fade-in">
            <div class="w-32 h-32 mx-auto mb-6 relative">
                <svg class="w-full h-full" viewBox="0 0 36 36">
                    <path class="text-slate-100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3" />
                    <path id="score-circle" class="text-blue-600 transition-all duration-1000 ease-out" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3" />
                </svg>
                <div class="absolute inset-0 flex items-center justify-center flex-col">
                    <span id="final-score-percent" class="text-3xl font-bold text-slate-800">0%</span>
                </div>
            </div>
            <h2 class="text-2xl font-bold text-slate-800 mb-2">Challenge Complete!</h2>
            <p class="text-slate-500 mb-6">You answered <span id="final-score-text" class="font-bold text-slate-900">0</span> correctly out of 100.</p>
            
            <div id="result-message" class="p-4 bg-slate-50 rounded-lg text-sm text-slate-600 mb-6">
                <!-- Performance message -->
            </div>

            <button onclick="location.reload()" class="w-full py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200">
                <i class="fas fa-redo mr-2"></i> Try Again
            </button>
        </div>

    </main>

    <script>
        /* 100 QUESTIONS DATA STRUCTURE
           Groups:
           0-24: Basic
           25-49: Intermediate
           50-74: Advanced
           75-99: Expert
        */
        const quizData = [
            // --- GROUP 1: BASIC (1-25) ---
            { q: "What is the time complexity O(1) known as?", a: "Constant Time", options: ["Constant Time", "Linear Time", "Logarithmic Time", "Exponential Time"], diff: "Basic" },
            { q: "What is the time complexity O(n) known as?", a: "Linear Time", options: ["Linear Time", "Constant Time", "Quadratic Time", "Logarithmic Time"], diff: "Basic" },
            { q: "What is the time complexity to access an array element by index?", a: "O(1)", options: ["O(1)", "O(n)", "O(log n)", "O(n^2)"], diff: "Basic" },
            { q: "In C++, what is the default access specifier for a struct?", a: "public", options: ["public", "private", "protected", "friend"], diff: "Basic" },
            { q: "Which operator is used to get the memory address of a variable?", a: "& (Address-of)", options: ["& (Address-of)", "* (Dereference)", "-> (Arrow)", ". (Dot)"], diff: "Basic" },
            { q: "Which operator is used to access the value stored at a pointer's address?", a: "* (Dereference)", options: ["* (Dereference)", "& (Address-of)", "-> (Arrow)", ":: (Scope)"], diff: "Basic" },
            { q: "What does `malloc` return?", a: "void*", options: ["void*", "int*", "null", "char*"], diff: "Basic" },
            { q: "How do you correctly free an array allocated with `new int[10]`?", a: "delete[] p;", options: ["delete[] p;", "delete p;", "free(p);", "delete p[];"], diff: "Basic" },
            { q: "What is the main disadvantage of a standard C-array?", a: "Fixed size", options: ["Fixed size", "Slow access", "High memory overhead", "Cannot store integers"], diff: "Basic" },
            { q: "What is the time complexity O(n^2) known as?", a: "Quadratic Time", options: ["Quadratic Time", "Exponential Time", "Linear Time", "Logarithmic Time"], diff: "Basic" },
            { q: "If `p` is an integer pointer pointing to address 1000, what is `p + 1` (assuming 4-byte int)?", a: "1004", options: ["1004", "1001", "1008", "2000"], diff: "Basic" },
            { q: "Which header file is needed for `std::vector`?", a: "<vector>", options: ["<vector>", "<array>", "<list>", "<collection>"], diff: "Basic" },
            { q: "What happens if you access an array out of bounds in C++?", a: "Undefined Behavior", options: ["Undefined Behavior", "Compiler Error", "Always returns 0", "Throws an exception"], diff: "Basic" },
            { q: "What is the space complexity of creating an array of size N?", a: "O(N)", options: ["O(N)", "O(1)", "O(log N)", "O(N^2)"], diff: "Basic" },
            { q: "Which loop typically results in O(log n) time complexity?", a: "i = i * 2", options: ["i = i * 2", "i = i + 1", "i = i + 2", "i = i - 1"], diff: "Basic" },
            { q: "What is the default value of a local int variable in C++?", a: "Garbage/Undefined", options: ["Garbage/Undefined", "0", "null", "-1"], diff: "Basic" },
            { q: "What does `sizeof(int*)` typically return on a 64-bit system?", a: "8 bytes", options: ["8 bytes", "4 bytes", "2 bytes", "16 bytes"], diff: "Basic" },
            { q: "Which function is used to resize memory allocated by malloc?", a: "realloc", options: ["realloc", "resize", "alloc", "malloc_new"], diff: "Basic" },
            { q: "A function calling itself is known as?", a: "Recursion", options: ["Recursion", "Iteration", "Polymorphism", "Encapsulation"], diff: "Basic" },
            { q: "What is the Big O of Binary Search?", a: "O(log n)", options: ["O(log n)", "O(n)", "O(1)", "O(n log n)"], diff: "Basic" },
            { q: "What is `nullptr` in C++?", a: "A type-safe null pointer constant", options: ["A type-safe null pointer constant", "An integer 0", "A macro for NULL", "A void pointer"], diff: "Basic" },
            { q: "How are elements stored in a C++ array?", a: "Contiguously in memory", options: ["Contiguously in memory", "Linked via pointers", "Randomly in heap", "Indexed by hash"], diff: "Basic" },
            { q: "Which of these is NOT a primitive type in C++?", a: "std::string", options: ["std::string", "int", "char", "double"], diff: "Basic" },
            { q: "What is the worst-case complexity of linear search?", a: "O(n)", options: ["O(n)", "O(1)", "O(log n)", "O(n/2)"], diff: "Basic" },
            { q: "In `struct Node { int data; Node* next; }`, what is `next`?", a: "A pointer to a Node", options: ["A pointer to a Node", "A Node object", "An integer", "A reference"], diff: "Basic" },

            // --- GROUP 2: INTERMEDIATE (26-50) ---
            { q: "What data structure follows LIFO?", a: "Stack", options: ["Stack", "Queue", "Array", "Tree"], diff: "Intermediate" },
            { q: "What data structure follows FIFO?", a: "Queue", options: ["Queue", "Stack", "Heap", "Graph"], diff: "Intermediate" },
            { q: "Time complexity to insert at the START of a Singly Linked List?", a: "O(1)", options: ["O(1)", "O(n)", "O(log n)", "O(n^2)"], diff: "Intermediate" },
            { q: "Time complexity to access the Kth element in a Linked List?", a: "O(n)", options: ["O(n)", "O(1)", "O(log n)", "O(k)"], diff: "Intermediate" },
            { q: "Which data structure is best for implementing a recursive algorithm iteratively?", a: "Stack", options: ["Stack", "Queue", "Map", "Set"], diff: "Intermediate" },
            { q: "What is the main difference between Singly and Doubly Linked Lists?", a: "Doubly has prev and next pointers", options: ["Doubly has prev and next pointers", "Singly is faster", "Doubly uses less memory", "Singly is circular"], diff: "Intermediate" },
            { q: "What is the worst-case time complexity of insertion in a `std::vector` (forcing resize)?", a: "O(n)", options: ["O(n)", "O(1)", "O(log n)", "O(n^2)"], diff: "Intermediate" },
            { q: "Which std container is implemented as a Doubly Linked List?", a: "std::list", options: ["std::list", "std::vector", "std::deque", "std::forward_list"], diff: "Intermediate" },
            { q: "In a Circular Linked List, the tail's next pointer points to?", a: "Head", options: ["Head", "Null", "Tail", "Previous"], diff: "Intermediate" },
            { q: "What happens to iterators in a vector when it resizes?", a: "They become invalidated", options: ["They become invalidated", "They update automatically", "They point to null", "Nothing happens"], diff: "Intermediate" },
            { q: "How do you check if a Stack is empty?", a: "top == null or size == 0", options: ["top == null or size == 0", "top == max", "front == rear", "base == top"], diff: "Intermediate" },
            { q: "Implementing a Queue with an Array requires handling what issue?", a: "Wrapping around (Circular)", options: ["Wrapping around (Circular)", "Recursion depth", "Null pointers", "Memory leaks"], diff: "Intermediate" },
            { q: "Which operation is O(1) in a `std::deque` but O(n) in a `std::vector`?", a: "push_front", options: ["push_front", "push_back", "operator[]", "size()"], diff: "Intermediate" },
            { q: "What is the minimum number of pointers per node in a Doubly Linked List?", a: "2", options: ["2", "1", "3", "0"], diff: "Intermediate" },
            { q: "Which sorting algorithm is typically O(n^2)?", a: "Bubble Sort", options: ["Bubble Sort", "Merge Sort", "Heap Sort", "Quick Sort"], diff: "Intermediate" },
            { q: "Which sorting algorithm is typically O(n log n)?", a: "Merge Sort", options: ["Merge Sort", "Bubble Sort", "Insertion Sort", "Selection Sort"], diff: "Intermediate" },
            { q: "To reverse a Linked List, how many pointers do you typically track?", a: "3 (prev, curr, next)", options: ["3 (prev, curr, next)", "1 (head)", "2 (curr, next)", "4 (head, tail, prev, curr)"], diff: "Intermediate" },
            { q: "What is a 'jagged array'?", a: "Array of arrays with different sizes", options: ["Array of arrays with different sizes", "An unsorted array", "An array with gaps", "A sparse matrix"], diff: "Intermediate" },
            { q: "What is the complexity of `pop_back()` on a vector?", a: "O(1)", options: ["O(1)", "O(n)", "O(log n)", "O(n/2)"], diff: "Intermediate" },
            { q: "What does `std::stack::pop()` return?", a: "void (nothing)", options: ["void (nothing)", "The top element", "A boolean", "The new size"], diff: "Intermediate" },
            { q: "Which data structure is used for Breadth-First Search (BFS)?", a: "Queue", options: ["Queue", "Stack", "Tree", "Hash Map"], diff: "Intermediate" },
            { q: "Which data structure is used for Depth-First Search (DFS)?", a: "Stack", options: ["Stack", "Queue", "Linked List", "Set"], diff: "Intermediate" },
            { q: "In a Queue implemented with a Linked List, where do you Enqueue?", a: "Tail", options: ["Tail", "Head", "Middle", "Anywhere"], diff: "Intermediate" },
            { q: "In a Queue implemented with a Linked List, where do you Dequeue?", a: "Head", options: ["Head", "Tail", "Middle", "Anywhere"], diff: "Intermediate" },
            { q: "What is the space complexity of storing a Linked List of N nodes?", a: "O(N)", options: ["O(N)", "O(1)", "O(N^2)", "O(log N)"], diff: "Intermediate" },

            // --- GROUP 3: ADVANCED (51-75) ---
            { q: "What is the defining property of a Binary Search Tree (BST)?", a: "Left < Node < Right", options: ["Left < Node < Right", "Left > Node > Right", "Complete Tree", "Heaped property"], diff: "Advanced" },
            { q: "Which traversal prints a BST in sorted order?", a: "Inorder", options: ["Inorder", "Preorder", "Postorder", "Level Order"], diff: "Advanced" },
            { q: "Max number of nodes in a binary tree of height h?", a: "2^(h+1) - 1", options: ["2^(h+1) - 1", "2^h", "h^2", "2*h + 1"], diff: "Advanced" },
            { q: "Worst-case search time in an unbalanced BST?", a: "O(n)", options: ["O(n)", "O(log n)", "O(1)", "O(n^2)"], diff: "Advanced" },
            { q: "What is the root property of a Max-Heap?", a: "Root >= Children", options: ["Root >= Children", "Root <= Children", "Root is always 0", "Root has no children"], diff: "Advanced" },
            { q: "Index of Left Child in array-based Heap (0-indexed)?", a: "2*i + 1", options: ["2*i + 1", "2*i", "2*i + 2", "i/2"], diff: "Advanced" },
            { q: "Index of Parent in array-based Heap (0-indexed)?", a: "(i-1)/2", options: ["(i-1)/2", "i/2", "2*i", "(i+1)/2"], diff: "Advanced" },
            { q: "Time complexity to insert into a Heap?", a: "O(log n)", options: ["O(log n)", "O(1)", "O(n)", "O(n log n)"], diff: "Advanced" },
            { q: "What underlying structure does `std::map` typically use?", a: "Red-Black Tree", options: ["Red-Black Tree", "Hash Table", "Vector", "Linked List"], diff: "Advanced" },
            { q: "What underlying structure does `std::unordered_map` use?", a: "Hash Table", options: ["Hash Table", "BST", "Heap", "Stack"], diff: "Advanced" },
            { q: "Average search time in a Hash Table?", a: "O(1)", options: ["O(1)", "O(n)", "O(log n)", "O(n^2)"], diff: "Advanced" },
            { q: "What is a Hash Collision?", a: "Two keys mapping to same index", options: ["Two keys mapping to same index", "Table running out of memory", "Key not found", "Invalid hash function"], diff: "Advanced" },
            { q: "What is Chaining in Hash Tables?", a: "Using a list at each bucket", options: ["Using a list at each bucket", "Linking two tables", "Recursive hashing", "Sorting the keys"], diff: "Advanced" },
            { q: "Which traversal is best to delete a tree (freeing memory)?", a: "Postorder", options: ["Postorder", "Inorder", "Preorder", "Level Order"], diff: "Advanced" },
            { q: "What is the height of a balanced BST with N nodes?", a: "log N", options: ["log N", "N", "N/2", "N^2"], diff: "Advanced" },
            { q: "Elements in `std::set` are always...?", a: "Sorted and Unique", options: ["Sorted and Unique", "Unsorted and Unique", "Sorted and Duplicate", "Random"], diff: "Advanced" },
            { q: "What is `std::priority_queue` by default?", a: "Max-Heap", options: ["Max-Heap", "Min-Heap", "BST", "Stack"], diff: "Advanced" },
            { q: "How do you handle 'extract-min' in a Min-Heap?", a: "Swap root with last, remove last, bubble down", options: ["Swap root with last, remove last, bubble down", "Delete root, shift array", "Delete root, bubble up", "Search and delete"], diff: "Advanced" },
            { q: "What is a Complete Binary Tree?", a: "Filled levels, last level left-filled", options: ["Filled levels, last level left-filled", "Every node has 2 children", "Every node has 0 or 2 children", "Perfectly symmetrical"], diff: "Advanced" },
            { q: "Time complexity to build a Heap from an array?", a: "O(n)", options: ["O(n)", "O(n log n)", "O(log n)", "O(n^2)"], diff: "Advanced" },
            { q: "Complexity of `std::set::insert()`?", a: "O(log n)", options: ["O(log n)", "O(1)", "O(n)", "O(n log n)"], diff: "Advanced" },
            { q: "What happens if you insert a duplicate into `std::set`?", a: "It is ignored", options: ["It is ignored", "It is added", "It throws an error", "It replaces the old one"], diff: "Advanced" },
            { q: "Which is NOT a linear data structure?", a: "Tree", options: ["Tree", "Stack", "Queue", "Vector"], diff: "Advanced" },
            { q: "Formula for middle index in Binary Search to avoid overflow?", a: "low + (high - low) / 2", options: ["low + (high - low) / 2", "(low + high) / 2", "high - low / 2", "low + high"], diff: "Advanced" },
            { q: "What is `std::pair` often used for?", a: "Storing two heterogeneous values", options: ["Storing two heterogeneous values", "Linked Lists", "Defining classes", "Loops"], diff: "Advanced" },

            // --- GROUP 4: EXPERT (76-100) ---
            { q: "What is a Memory Leak?", a: "Allocated memory not freed", options: ["Allocated memory not freed", "Stack Overflow", "Using uninitialized memory", "Array out of bounds"], diff: "Expert" },
            { q: "What is a Dangling Pointer?", a: "Pointer to freed memory", options: ["Pointer to freed memory", "Null pointer", "Uninitialized pointer", "Void pointer"], diff: "Expert" },
            { q: "What is a Double Free error?", a: "Calling delete on the same pointer twice", options: ["Calling delete on the same pointer twice", "Allocating twice", "Using two pointers", "Freeing a null pointer"], diff: "Expert" },
            { q: "What is the type `int**`?", a: "Pointer to a Pointer", options: ["Pointer to a Pointer", "Double Integer", "Reference to int", "2D Array literal"], diff: "Expert" },
            { q: "If `v.capacity() == v.size()`, what happens on push_back?", a: "Reallocation (new memory + copy)", options: ["Reallocation (new memory + copy)", "Simple insert", "Overflow Error", "Nothing"], diff: "Expert" },
            { q: "Does `std::vector::clear()` free the memory capacity?", a: "No, size becomes 0 but capacity remains", options: ["No, size becomes 0 but capacity remains", "Yes, it frees everything", "It deletes the vector object", "It fills with zeros"], diff: "Expert" },
            { q: "What is Iterator Invalidation?", a: "Iterators pointing to old memory locations", options: ["Iterators pointing to old memory locations", "Iterators reaching end()", "Looping infinitely", "Using null iterators"], diff: "Expert" },
            { q: "What is `std::vector::shrink_to_fit()`?", a: "Requests to reduce capacity to size", options: ["Requests to reduce capacity to size", "Clears the vector", "Resizes to 0", "Deletes elements"], diff: "Expert" },
            { q: "Worst case complexity of Hash Table insert with many collisions?", a: "O(n)", options: ["O(n)", "O(1)", "O(log n)", "O(n log n)"], diff: "Expert" },
            { q: "What is the result of `delete nullptr;`?", a: "Safe / No-op", options: ["Safe / No-op", "Crash", "Memory Leak", "Compiler Error"], diff: "Expert" },
            { q: "Difference between `vector[i]` and `vector.at(i)`?", a: "at() checks bounds, [] does not", options: ["at() checks bounds, [] does not", "[] checks bounds, at() does not", "No difference", "[] is slower"], diff: "Expert" },
            { q: "What is a Segmentation Fault?", a: "Accessing memory you don't own", options: ["Accessing memory you don't own", "Division by zero", "Infinite Loop", "Syntax Error"], diff: "Expert" },
            { q: "How do you declare a pointer to a function?", a: "void (*ptr)()", options: ["void (*ptr)()", "void *ptr()", "void ptr()", "function* ptr"], diff: "Expert" },
            { q: "What does `std::move` do?", a: "Casts to r-value reference (enables move semantics)", options: ["Casts to r-value reference (enables move semantics)", "Moves memory physically", "Copies data", "Deletes object"], diff: "Expert" },
            { q: "Why use `const` reference in function arguments?", a: "Avoid copy + Read-only safety", options: ["Avoid copy + Read-only safety", "To modify the original", "To allow null values", "To speed up compilation"], diff: "Expert" },
            { q: "What is Stable Sort?", a: "Preserves relative order of equal elements", options: ["Preserves relative order of equal elements", "Fastest sort", "Uses constant space", "Sorts in place"], diff: "Expert" },
            { q: "In a Min-Heap, where is the largest element?", a: "One of the leaves", options: ["One of the leaves", "The root", "The second level", "The middle"], diff: "Expert" },
            { q: "What is the complexity of `std::list::splice`?", a: "O(1)", options: ["O(1)", "O(n)", "O(log n)", "O(n^2)"], diff: "Expert" },
            { q: "Why is `vector<bool>` special?", a: "It is specialized to use 1 bit per boolean", options: ["It is specialized to use 1 bit per boolean", "It is faster", "It uses 4 bytes per bool", "It cannot be resized"], diff: "Expert" },
            { q: "What is `size_t`?", a: "Unsigned integer for size/indices", options: ["Unsigned integer for size/indices", "Signed integer", "A pointer type", "A macro for int"], diff: "Expert" },
            { q: "Space complexity of recursive Fibonacci without memoization?", a: "O(n) [Depth of stack]", options: ["O(n) [Depth of stack]", "O(1)", "O(2^n)", "O(log n)"], diff: "Expert" },
            { q: "What is the 'load factor' in a Hash Table?", a: "Elements / Buckets", options: ["Elements / Buckets", "Buckets / Elements", "Collision count", "Hash function complexity"], diff: "Expert" },
            { q: "When does `std::map` iterator invalidation happen?", a: "Only for the deleted element", options: ["Only for the deleted element", "On every insert", "On every delete", "Never"], diff: "Expert" },
            { q: "What does `virtual` keyword do in C++ classes?", a: "Enables polymorphism / dynamic dispatch", options: ["Enables polymorphism / dynamic dispatch", "Makes it static", "Prevents inheritance", "Makes it private"], diff: "Expert" },
            { q: "What is `std::weak_ptr` used for?", a: "Breaking circular references", options: ["Breaking circular references", "Automatic deletion", "Shared ownership", "Faster pointers"], diff: "Expert" }
        ];

        // State Variables
        let currentQuestionIndex = 0;
        let score = 0;
        let shuffledQuestions = [];
        let isAnswering = false;

        // DOM Elements
        const startScreen = document.getElementById('start-screen');
        const quizContainer = document.getElementById('quiz-container');
        const resultsScreen = document.getElementById('results-screen');
        const questionText = document.getElementById('question-text');
        const optionsGrid = document.getElementById('options-grid');
        const feedbackArea = document.getElementById('feedback-area');
        const feedbackTitle = document.getElementById('feedback-title');
        const feedbackText = document.getElementById('feedback-text');
        const feedbackIcon = document.getElementById('feedback-icon');
        const scoreDisplay = document.getElementById('score-display');
        const currentScoreEl = document.getElementById('current-score');
        const progressBar = document.getElementById('progress-bar');
        const difficultyLabel = document.getElementById('difficulty-label');
        
        // --- Initialization ---
        function startQuiz() {
            // Start straight away - no shuffled order of questions to maintain difficulty progression
            // However, we will shuffle the OPTIONS within the questions.
            
            // Copy data to avoid modifying original
            shuffledQuestions = [...quizData];
            
            currentQuestionIndex = 0;
            score = 0;
            currentScoreEl.textContent = 0;
            
            startScreen.classList.add('hidden');
            resultsScreen.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            scoreDisplay.classList.remove('hidden');
            
            loadQuestion();
        }

        document.getElementById('restart-btn').onclick = () => {
            if(confirm("Restart quiz? Current progress will be lost.")) {
                location.reload();
            }
        };

        // --- Core Game Logic ---
        function loadQuestion() {
            isAnswering = false;
            const qData = shuffledQuestions[currentQuestionIndex];
            
            // Update Difficulty Label
            let diffColor = "bg-green-100 text-green-700";
            if(qData.diff === "Intermediate") diffColor = "bg-blue-100 text-blue-700";
            if(qData.diff === "Advanced") diffColor = "bg-purple-100 text-purple-700";
            if(qData.diff === "Expert") diffColor = "bg-orange-100 text-orange-700";
            
            difficultyLabel.className = `text-sm font-bold px-3 py-1 rounded ${diffColor} transition-colors duration-300`;
            difficultyLabel.textContent = `${qData.diff} Level`;

            // Update UI Headers
            document.getElementById('q-current').textContent = currentQuestionIndex + 1;
            progressBar.style.width = `${((currentQuestionIndex) / quizData.length) * 100}%`;
            
            // Reset View
            questionText.textContent = qData.q;
            feedbackArea.classList.add('hidden');
            optionsGrid.innerHTML = '';
            
            // Shuffle Options
            // We copy the options array to not mess up the source
            let currentOptions = [...qData.options];
            currentOptions.sort(() => Math.random() - 0.5);

            // Render Buttons
            currentOptions.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "option-btn w-full text-left p-4 rounded-xl border border-slate-200 bg-white hover:bg-slate-50 hover:border-blue-300 text-slate-700 text-sm md:text-base font-medium shadow-sm";
                btn.innerText = opt; 
                btn.onclick = () => handleAnswer(btn, opt, qData.a);
                optionsGrid.appendChild(btn);
            });
        }

        function handleAnswer(btn, selected, correct) {
            if (isAnswering) return;
            isAnswering = true;

            // Disable all buttons
            const allBtns = optionsGrid.querySelectorAll('button');
            allBtns.forEach(b => {
                b.disabled = true;
                b.classList.add('opacity-70', 'cursor-not-allowed');
                // Highlight the correct answer
                if (b.innerText === correct) {
                    b.classList.remove('border-slate-200', 'bg-white', 'opacity-70');
                    b.classList.add('bg-green-100', 'border-green-500', 'text-green-900', 'correct-anim', 'font-bold');
                }
            });

            const isCorrect = selected === correct;
            
            if (isCorrect) {
                score++;
                currentScoreEl.textContent = score;
                showFeedback(true, "Correct!", getRandomPraise());
            } else {
                btn.classList.remove('border-slate-200', 'bg-white', 'opacity-70');
                btn.classList.add('bg-red-100', 'border-red-500', 'text-red-900', 'wrong-anim', 'font-bold');
                showFeedback(false, "Incorrect", `The correct answer was: ${correct}`);
            }
        }

        function getRandomPraise() {
            const praises = ["Spot on!", "Excellent!", "You nailed it.", "Correct!", "Keep it up!", "DSA Master in training."];
            return praises[Math.floor(Math.random() * praises.length)];
        }

        function showFeedback(isCorrect, title, text) {
            feedbackArea.classList.remove('hidden');
            feedbackTitle.textContent = title;
            feedbackText.textContent = text;
            feedbackTitle.className = isCorrect ? "font-bold text-green-600" : "font-bold text-red-600";
            feedbackIcon.className = `w-10 h-10 flex-shrink-0 rounded-full flex items-center justify-center text-white font-bold ${isCorrect ? 'bg-green-500' : 'bg-red-500'}`;
            feedbackIcon.innerHTML = isCorrect ? '<i class="fas fa-check"></i>' : '<i class="fas fa-times"></i>';
            
            // Auto scroll to feedback on mobile
            setTimeout(() => {
                feedbackArea.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex >= quizData.length) {
                finishQuiz();
            } else {
                loadQuestion();
            }
        }

        function finishQuiz() {
            quizContainer.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            scoreDisplay.classList.add('hidden');
            
            const percent = Math.round((score / quizData.length) * 100);
            document.getElementById('final-score-text').textContent = score;
            document.getElementById('final-score-percent').textContent = `${percent}%`;
            
            // Animate Circle
            setTimeout(() => {
                const circle = document.getElementById('score-circle');
                const circumference = 2 * Math.PI * 15.9155;
                const offset = circumference - (percent / 100) * circumference;
                circle.style.strokeDasharray = `${circumference} ${circumference}`;
                circle.style.strokeDashoffset = offset;
            }, 100);

            // Custom Message
            const msgDiv = document.getElementById('result-message');
            if (percent >= 90) msgDiv.textContent = "Outstanding! You are ready for any DSA exam.";
            else if (percent >= 70) msgDiv.textContent = "Great job! A solid understanding of the core concepts.";
            else if (percent >= 50) msgDiv.textContent = "Good effort. Review the Intermediate and Advanced sections.";
            else msgDiv.textContent = "Keep practicing. Focus on the Basic concepts first.";
        }
    </script>
</body>
</html>